(self.webpackChunk=self.webpackChunk||[]).push([[222],{2468:(t,e,r)=>{r(1531),r(1756),r(1403),r(1929);var n=r(1210);t.exports=n.Map},2464:(t,e,r)=>{r(1712);var n=r(1210);t.exports=n.Object.assign},2466:(t,e,r)=>{r(1858),r(1756),r(1403),r(1929);var n=r(1210);t.exports=n.Set},2470:(t,e,r)=>{r(1891),r(1894),r(1896),r(1892),r(1897),r(1893),r(1898),r(1889),r(1890),r(2471),t.exports=r(207)},2471:(t,e,r)=>{r(1906),r(1914),r(1899),r(1900),r(1901),r(1902),r(1903),r(1904),r(1905),r(1907),r(1908),r(1911),r(1912),r(1913),r(1915),r(1916),r(1917),r(1919),r(1920),r(1921),r(1922),r(1923),r(1924),r(1925),r(1909),r(1756)},2467:(t,e,r)=>{var n=r(2468);t.exports=n},2463:(t,e,r)=>{var n=r(2464);t.exports=n},2465:(t,e,r)=>{var n=r(2466);t.exports=n},2469:(t,e,r)=>{var n=r(2470);t.exports=n},2428:(t,e,r)=>{"use strict";t.exports=r(2462)},2517:t=>{"use strict";t.exports={LOG:"log",BROWSER:"browser",AGENT:"agent"}},2445:(t,e,r)=>{"use strict";const n=r(911);t.exports={TEXT_MAP:n.FORMAT_TEXT_MAP,HTTP_HEADERS:n.FORMAT_HTTP_HEADERS,BINARY:n.FORMAT_BINARY,LOG:"log"}},2444:(t,e,r)=>{"use strict";const n=r(2445),s=r(2515),i=r(2446),o=r(2384),a=r(2516),c=r(2517);t.exports={formats:n,kinds:s,priority:i,tags:o,types:a,exporters:c}},2515:t=>{"use strict";t.exports={SERVER:"server",CLIENT:"client",PRODUCER:"producer",CONSUMER:"consumer"}},2446:t=>{"use strict";t.exports={USER_REJECT:-1,AUTO_REJECT:0,AUTO_KEEP:1,USER_KEEP:2}},2454:t=>{"use strict";t.exports={ASYNC_RESOURCE:"async_resource",ASYNC_LOCAL_STORAGE:"async_local_storage",ASYNC_HOOKS:"async_hooks",NOOP:"noop"}},2384:t=>{"use strict";const e={SERVICE_NAME:"service.name",RESOURCE_NAME:"resource.name",SPAN_TYPE:"span.type",SPAN_KIND:"span.kind",SAMPLING_PRIORITY:"sampling.priority",ANALYTICS:"_dd1.sr.eausr",ERROR:"error",MANUAL_KEEP:"manual.keep",MANUAL_DROP:"manual.drop",MEASURED:"_dd.measured",HTTP_URL:"http.url",HTTP_METHOD:"http.method",HTTP_STATUS_CODE:"http.status_code",HTTP_ROUTE:"http.route",HTTP_REQUEST_HEADERS:"http.request.headers",HTTP_RESPONSE_HEADERS:"http.response.headers"};e.ANALYTICS_SAMPLE_RATE=e.ANALYTICS,t.exports=e},2516:t=>{"use strict";t.exports={HTTP:"http",WEB:"web"}},2480:(t,e,r)=>{"use strict";const n=r(2319),{Reference:s,REFERENCE_CHILD_OF:i}=r(911),{REFERENCE_NOOP:o}=r(3297),a=r(2438);function c(t,e){return function(r){return r._datadog_wrapper=function(c,u){const p=e.service||t._service+"-http-client",h=function(t,e){return e&&e.method?e.method:t&&t.method?t.method:"GET"}(c,u),l=function(t){const e="object"==typeof t?t.url:t;return new n(e,window.location.origin)}(c),_=t.scope().active(),d=function(t,e){return new RegExp(`^${t}/v1/input/[a-z0-9]+$`,"i").test(e.href)||e.href.startsWith("https://rum-http-intake.logs.datadoghq.com")||e.href.startsWith("https://browser-http-intake.logs.datadoghq.com")}(t._url.href,l)?o:i,f=t.startSpan("browser.request",{references:[new s(d,_)],tags:{"span.kind":"client","service.name":p,"resource.name":h,"span.type":"http","http.method":h,"http.url":l.href}});f.setTag("_top_level",1),d===i&&(u=function(t,e,r,n){const s=window.ddtrace.ext.formats.HTTP_HEADERS,i=e._peers;if(n!==window.location.origin&&!a.isPeer(n,i))return t;if((t=t||{}).headers=t.headers||{},"function"==typeof t.headers.set){const n={};e.inject(r,s,n);for(const e in n)t.headers.set(e,n[e])}else e.inject(r,s,t.headers);return t}(u,t,f,l.origin));const g=t.scope().bind(r,f).call(this,c,u);return g.then((t=>{f.setTag("http.status_code",t.status)})),a.wrap(f,g),g},function(){return r._datadog_wrapper.apply(this,arguments)}}}t.exports={name:"fetch",patch:(t,e,r)=>c(e,r)(t),unpatch(t){!function(t){t._datadog_wrapper=t}(t)}}},2490:(t,e,r)=>{"use strict";const n=r(2319),{Reference:s,REFERENCE_CHILD_OF:i}=r(911),{REFERENCE_NOOP:o}=r(3297),a=r(2438);function c(t,e,r){const n=window.ddtrace.ext.formats.HTTP_HEADERS,s={},i=t._datadog_url.origin,o=e._peers;if(i===window.location.origin||a.isPeer(i,o)){e.inject(r,n,s);for(const e in s)t.setRequestHeader(e,s[e])}}function u(t,e){return new RegExp(`^${t}/v1/input/[a-z0-9]+$`,"i").test(e.href)||e.href.startsWith("https://rum-http-intake.logs.datadoghq.com")||e.href.startsWith("https://browser-http-intake.logs.datadoghq.com")}t.exports={name:"XMLHttpRequest",patch(t,e,r){this.wrap(t.prototype,"open",(function(t){return function(e,r){return this._datadog_method=e,this._datadog_url=new n(r,window.location.origin),t.apply(this,arguments)}})),this.wrap(t.prototype,"send",function(t,e){return function(r){return function(n){const a=e.service||t._service+"-http-client",p=this._datadog_method,h=this._datadog_url,l=t.scope().active(),_=u(t._url.href,h)?o:i,d=t.startSpan("browser.request",{references:[new s(_,l)],tags:{"span.kind":"client","service.name":a,"resource.name":p,"span.type":"http","http.method":p,"http.url":h.href}});d.setTag("_top_level",1),_===i&&c(this,t,d),this.addEventListener("error",(t=>d.setTag("error",t))),this.addEventListener("load",(()=>d.setTag("http.status",this.status))),this.addEventListener("loadend",(()=>d.finish()));try{return t.scope().bind(r,d).apply(this,arguments)}catch(t){throw d.setTag("error",t),d.finish(),t}}}}(e,r))},unpatch(t){this.unwrap(t.prototype,"open"),this.unwrap(t.prototype,"send")}}},2462:(t,e,r)=>{"use strict";r(2463),r(2465),r(2467),r(2469);const n=r(1435),s=r(2472),i=r(2444);n.use(s);const o=new(r(2518));t.exports=o,t.exports.default=t.exports,t.exports.tracer=t.exports,window.ddtrace={tracer:o,ext:i}},2539:(t,e,r)=>{"use strict";const n=r(2384).ANALYTICS;let s=!1;t.exports={enable(){s=!0},disable(){s=!1},sample(t,e,r){"object"==typeof e?this.sample(t,e[t.context()._name],r):void 0!==e?t.setTag(n,e):r&&s&&t.setTag(n,1)}}},2535:(t,e,r)=>{"use strict";const n=r(2319),s=r(1435),i=r(2536),o=r(2454),a=r(2450),c=r(450),{isTrue:u,isFalse:p}=r(2455),h=`${c().toString()}${c().toString()}`;t.exports=class{constructor(t){t=t||{},this.tags={},a.add(this.tags,s.env("DD_TAGS")),a.add(this.tags,s.env("DD_TRACE_TAGS")),a.add(this.tags,s.env("DD_TRACE_GLOBAL_TAGS")),a.add(this.tags,t.tags);const e=i(t.analytics,s.env("DD_TRACE_ANALYTICS_ENABLED"),s.env("DD_TRACE_ANALYTICS"),!1),r=i(s.env("DD_EXPERIMENTAL_PROFILING_ENABLED"),!1),c=i(s.env("DD_PROFILING_EXPORTERS"),"agent"),l=s.env("DD_PROFILING_SOURCE_MAP"),_=i(t.logInjection,s.env("DD_LOGS_INJECTION"),!1),d=i(t.runtimeMetrics,s.env("DD_RUNTIME_METRICS_ENABLED"),!1),f=i(t.hostname,s.env("DD_AGENT_HOST"),s.env("DD_TRACE_AGENT_HOSTNAME"),"127.0.0.1"),g=i(t.port,s.env("DD_TRACE_AGENT_PORT"),"8126"),m=i(t.url,s.env("DD_TRACE_AGENT_URL"),s.env("DD_TRACE_URL"),null),v=t.service||s.env("DD_SERVICE")||s.env("DD_SERVICE_NAME")||this.tags.service||s.service()||"node",y=i(t.env,s.env("DD_ENV"),this.tags.env),E=i(t.version,s.env("DD_VERSION"),this.tags.version,s.appVersion()),b=i(t.startupLogs,s.env("DD_TRACE_STARTUP_LOGS"),!0),S=i(t.enabled,s.env("DD_TRACE_ENABLED"),!0),x=i(t.debug,s.env("DD_TRACE_DEBUG"),!1),T=i(t.protocolVersion,s.env("DD_TRACE_AGENT_PROTOCOL_VERSION"),"0.4"),I=t.experimental&&t.experimental.sampler||{},w=t.ingestion||{},R=i(t.dogstatsd,{});Object.assign(I,{sampleRate:i(w.sampleRate,I.sampleRate,s.env("DD_TRACE_SAMPLE_RATE")),rateLimit:i(w.rateLimit,I.rateLimit,s.env("DD_TRACE_RATE_LIMIT"))}),this.enabled=u(S),this.debug=u(x),this.logInjection=u(_),this.env=y,this.url=m&&new n(m),this.site=i(t.site,s.env("DD_SITE"),"datadoghq.com"),this.hostname=f||this.url&&this.url.hostname,this.port=String(g||this.url&&this.url.port),this.flushInterval=i(parseInt(t.flushInterval,10),2e3),this.sampleRate=i(Math.min(Math.max(t.sampleRate,0),1),1),this.logger=t.logger,this.plugins=!!i(t.plugins,!0),this.service=v,this.version=E,this.analytics=u(e),this.dogstatsd={hostname:i(R.hostname,s.env("DD_DOGSTATSD_HOSTNAME"),this.hostname),port:String(i(R.port,s.env("DD_DOGSTATSD_PORT"),8125))},this.runtimeMetrics=u(d),this.trackAsyncScope=!1!==t.trackAsyncScope,this.experimental={b3:!(!t.experimental||!t.experimental.b3),runtimeId:!(!t.experimental||!t.experimental.runtimeId),exporter:t.experimental&&t.experimental.exporter,peers:t.experimental&&t.experimental.distributedTracingOriginAllowlist||t.experimental&&t.experimental.distributedTracingOriginWhitelist||[],enableGetRumData:t.experimental&&!!t.experimental.enableGetRumData,sampler:I,internalErrors:t.experimental&&t.experimental.internalErrors},this.reportHostname=u(i(t.reportHostname,s.env("DD_TRACE_REPORT_HOSTNAME"),!1)),this.scope=p(s.env("DD_CONTEXT_PROPAGATION"))?o.NOOP:i(t.scope,s.env("DD_TRACE_SCOPE")),this.clientToken=i(t.clientToken,s.env("DD_CLIENT_TOKEN")),this.logLevel=i(t.logLevel,s.env("DD_TRACE_LOG_LEVEL"),"debug"),this.profiling={enabled:u(r),sourceMap:!p(l),exporters:c},this.lookup=t.lookup,this.startupLogs=u(b),this.protocolVersion=T,a.add(this.tags,{service:this.service,env:this.env,version:this.version}),this.experimental.runtimeId&&a.add(this.tags,{"runtime-id":h})}}},3297:t=>{"use strict";t.exports={SAMPLE_RATE_METRIC_KEY:"_sample_rate",SAMPLING_PRIORITY_KEY:"_sampling_priority_v1",ANALYTICS_KEY:"_dd1.sr.eausr",ORIGIN_KEY:"_dd.origin",HOSTNAME_KEY:"_dd.hostname",REFERENCE_NOOP:"noop",SAMPLING_RULE_DECISION:"_dd.rule_psr",SAMPLING_LIMIT_DECISION:"_dd.limit_psr",SAMPLING_AGENT_DECISION:"_dd.agent_psr"}},2493:(t,e,r)=>{"use strict";const n=r(2319);t.exports=class{constructor({clientToken:t,url:e,site:r,env:s}){this._queue=[],this._flushing=!1,this._clientToken=t,this._env=s,this._url=e||new n("https://public-trace-http-intake.logs."+r),this._size=0,window.addEventListener("beforeunload",(()=>this._flush())),window.addEventListener("visibilitychange",(()=>this._flush()))}export(t){const e=this._traceMeta(),r=JSON.stringify({spans:t,meta:e}),n=r.length+(this._queue.length>0?"\r\n".length:0);if(this._size+n>65536){if(this._flushing)return;if(n>65536)return;this._flush()}this._size+=n,this._queue.push(r)}setUrl(t){this._url=t}_flush(){if(0===this._queue.length)return;this._flushing=!0;const t=`${this._url.href}/v1/input/${this._clientToken}`,e=this._queue.join("\r\n");this._queue=[],this._size=0,function(t,e,r){if(window.navigator&&window.navigator.sendBeacon)window.navigator.sendBeacon(t,e);else if(window.fetch)window.fetch(t,{body:e,method:"POST",keepalive:!0,mode:"no-cors"}).then(r,r);else{const n=new XMLHttpRequest;n.open("POST",t,!0),n.addEventListener("loadend",r),n.send(e)}}(t,e,(()=>{this._flushing=!1}))}_traceMeta(){const t={"_dd.source":"browser"};return function(t,e,r){if(!r)return;t[e]=r}(t,"env",this._env),t}}},2525:(t,e,r)=>{"use strict";const n=r(3297),s=r(2384),i=r(269),o=r(450),a=n.SAMPLING_PRIORITY_KEY,c=n.ANALYTICS_KEY,u=s.ANALYTICS,p=s.MEASURED,h=n.ORIGIN_KEY,l=n.HOSTNAME_KEY,_={"service.name":"service","span.type":"type","resource.name":"resource"};function d(t,e,r,n,s){switch(typeof n){case"string":t[r]=n;break;case"number":if(isNaN(n))break;e[r]=n;break;case"undefined":break;case"object":if(null===n)break;if((i=n).constructor&&"Buffer"===i.constructor.name&&"function"==typeof i.readInt8&&"function"==typeof i.toString||function(t){return t.constructor&&"URL"===t.constructor.name&&"string"==typeof t.href&&"function"==typeof t.toString}(n)){e[r]=n.toString();break}if(!Array.isArray(n)){!function(t,e,r,n,s){if(~(s=s||[]).indexOf(n))return void(t[r]="[Circular]");s.push(n);for(const i in n)d(t,e,`${r}.${i}`,n[i],s);s.pop()}(t,e,r,n,s);break}default:d(t,e,r,f(n))}var i}function f(t){try{return t&&"function"!=typeof t.toString?JSON.stringify(t):String(t)}catch(t){i.error(t)}}t.exports=function(t){const e=function(t){const e=t.context();return{trace_id:e._traceId,span_id:e._spanId,parent_id:e._parentId||o("0"),name:f(e._name),resource:f(e._name),error:0,meta:{},metrics:{},start:Math.round(1e6*t._startTime),duration:Math.round(1e6*t._duration)}}(t);return function(t,e){const r=e.context()._tags.error;r instanceof Error&&(d(t.meta,t.metrics,"error.msg",r.message),d(t.meta,t.metrics,"error.type",r.name),d(t.meta,t.metrics,"error.stack",r.stack))}(e,t),function(t,e){const r=e.context(),n=r._trace.origin,s=r._tags,i=r._hostname,o=r._sampling.priority,c=e.tracer()._internalErrors;for(const e in s)switch(e){case"service.name":case"span.type":case"resource.name":d(t,{},_[e],s[e]);break;case"http.status_code":d(t.meta,{},e,s[e]&&String(s[e]));break;case l:case u:break;case p:d({},t.metrics,e,void 0===s[e]||s[e]?1:0);break;case"error":s[e]&&("internal"!==s["span.kind"]||c)&&(t.error=1);break;case"error.type":case"error.msg":case"error.stack":("internal"!==s["span.kind"]||c)&&(t.error=1);default:d(t.meta,t.metrics,e,s[e])}e.tracer()._service===s["service.name"]&&d(t.meta,t.metrics,"language","javascript");d(t.meta,t.metrics,a,o),d(t.meta,t.metrics,h,n),d(t.meta,t.metrics,l,i)}(e,t),function(t,e){let r=e.context()._tags[u];r=!0===r?1:parseFloat(r);isNaN(r)||(t.metrics[c]=Math.max(Math.min(r,1),0))}(e,t),e}},450:(t,e,r)=>{"use strict";const n=r(1435),s=4294967296,i=new Uint8Array(8),o=new Uint32Array(2);n.crypto&&n.crypto.getRandomValues(o);const a=Array.prototype.map,c=t=>`${t<16?"0":""}${t.toString(16)}`;class u{constructor(t,e){this._isUint64BE=!0,this._buffer="number"==typeof e?function(t,e){const r=new Uint8Array(8),n=t.length;let i=0,o=0,a=0;"-"===t[0]&&i++;const c=i;for(;i<n;){const r=parseInt(t[i++],e);if(!(r>=0))break;a=a*e+r,o=o*e+Math.floor(a/s),a%=s}c&&(o=~o,a?a=s-a:o++);return l(r,o,0),l(r,a,4),r}(t,e):function(t){if("0"===t)return i;if(!t)return function(){const t=new Uint8Array(8),e=2147483647&p(o[0]),r=p(o[1]);return l(t,e,0),l(t,r,4),t}();const e=Math.ceil(t.length/2),r=new Uint8Array(e);for(let n=0;n<e;n++)r[n]=parseInt(t.substring(2*n,2*n+2),16);return r}(t)}toString(t){return"number"==typeof t?function(t,e){let r=h(t,0),n=h(t,4),i="";e=e||10;for(;;){const t=r%e*s+n;if(r=Math.floor(r/e),n=Math.floor(t/e),i=(t%e).toString(e)+i,!r&&!n)break}return i}(this._buffer,t):(e=this._buffer,a.call(e,c).join(""));var e}toBuffer(){return this._buffer}toArray(){return 8===this._buffer.length?this._buffer:this._buffer.subarray(-8)}toJSON(){return this.toString()}}function p(t){return t^Math.floor(4294967296*Math.random())}function h(t,e){return 16777216*t[e+0]+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3]}function l(t,e,r){t[3+r]=255&e,e>>=8,t[2+r]=255&e,e>>=8,t[1+r]=255&e,e>>=8,t[0+r]=255&e}t.exports=(t,e)=>new u(t,e)},2537:(t,e,r)=>{"use strict";const n=r(2538),s=r(269),i=r(1435),{isTrue:o,isFalse:a}=r(2455);n({logger:()=>{}});const c=i.plugins,u=i.env("DD_TRACE_DISABLED_PLUGINS");function p(t){return i.env(("DD_TRACE_"+t.toUpperCase()).replace(/[^a-z0-9_]/gi,"_"))}function h(t,e={}){if(!t)return e;const r=p(t+"_ENABLED");void 0!==r&&(e.enabled=o(r));const n=p(t+"_ANALYTICS_ENABLED"),s=Math.min(Math.max(p(t+"_ANALYTICS_SAMPLE_RATE"),0),1);return a(n)?e.analytics=!1:Number.isNaN(s)?o(n)&&(e.analytics=!0):e.analytics=s,e}t.exports=class{constructor(t){this._tracer=t,this._loader=new i.Loader(this),this._enabled=!1,this._names=new Set,this._plugins=new Map,this._instrumented=new Map,this._disabledPlugins=new Set(u&&u.split(",").map((t=>t.trim())))}use(t,e){"boolean"==typeof e&&(e={enabled:e}),e=h(t,e);try{this._set(c[t.toLowerCase()],{name:t,config:e})}catch(e){s.debug(`Could not find a plugin named "${t}".`)}this._enabled&&this._loader.reload(this._plugins)}enable(t){t=t||{},this._enabled=!0,!1!==t.plugins&&Object.keys(c).filter((t=>!this._plugins.has(c[t]))).forEach((t=>{this._set(c[t],{name:t,config:h(t)})})),this._loader.reload(this._plugins)}disable(){for(const t of this._instrumented.keys())this.unpatch(t);this._plugins.clear(),this._enabled=!1,this._loader.reload(this._plugins)}wrap(t,e,r){t=[].concat(t),e=[].concat(e),t.forEach((t=>{e.forEach((e=>{if("function"!=typeof t[e])throw new Error(`Expected object ${t} to contain method ${e}.`);Object.defineProperty(t[e],"_datadog_patched",{value:!0,configurable:!0})}))})),n.massWrap.call(this,t,e,(function(t,e){const n=r(t,e),s=Object.getOwnPropertyDescriptors(t),i=Reflect.ownKeys(s);for(const t of i)"symbol"!=typeof t||n.hasOwnProperty(t)||Object.defineProperty(n,t,s[t]);return n}))}unwrap(t,e,r){t=[].concat(t),e=[].concat(e),n.massUnwrap.call(this,t,e,r),t.forEach((t=>{e.forEach((e=>{t[e]&&delete t[e]._datadog_patched}))}))}wrapExport(t,e){if("function"!=typeof t)return t;const r=Object.keys(t),n=function(){return t._datadog_wrapper.apply(this,arguments)};for(const e of r)n[e]=t[e];return t._datadog_wrapper=e,n}unwrapExport(t){return t&&t._datadog_wrapper&&(t._datadog_wrapper=t),t}load(t,e){if(!this._enabled)return;const r=[].concat(t),n=!1!==e.config.enabled;i.metrics().boolean("datadog.tracer.node.plugin.enabled.by.name",n,"name:"+e.name);try{r.forEach((t=>{this._loader.load(t,e.config)}))}catch(r){s.error(r),this.unload(t),s.debug(`Error while trying to patch ${e.name}. The plugin has been disabled.`),i.metrics().increment("datadog.tracer.node.plugin.errors",!0)}}unload(t){[].concat(t).forEach((t=>{this.unpatch(t),this._instrumented.delete(t)}));const e=this._plugins.get(t);e&&(this._plugins.delete(t),i.metrics().boolean("datadog.tracer.node.plugin.enabled.by.name",!1,"name:"+e.name))}patch(t,e,r){let n=this._instrumented.get(t);if(n||this._instrumented.set(t,n=new Set),!n.has(e))return n.add(e),t.patch.call(this,e,this._tracer._tracer,r)}unpatch(t){const e=this._instrumented.get(t);e&&e.forEach((e=>{try{t.unpatch.call(this,e,this._tracer)}catch(t){s.error(t)}}))}_set(t,e){this._disabledPlugins.has(e.name)?s.debug(`Plugin "${e.name}" was disabled via configuration option.`):(this._plugins.set(t,e),this.load(t,e))}}},269:(t,e,r)=>{"use strict";const n=r(2447),s={debug:t=>console.debug(t),info:t=>console.info(t),warn:t=>console.warn(t),error:t=>console.error(t)},i={debug:20,info:30,warn:40,error:50},o=t=>t&&"string"==typeof t&&i[t.toLowerCase().trim()]||i.debug,a=t=>{const e={};return function(r){return e[r]||(e[r]=t.apply(this,arguments)),e[r]}};function c(t){return"function"==typeof t?t():t}function u(t){p._tracer?p._tracer.scope().activate(p._noopSpan(),t):t()}const p={_isLogLevelEnabled(t){return i[t]>=this._logLevel},use(t){return t&&t.debug instanceof Function&&t.error instanceof Function&&(this._logger=t),this},toggle(t,e,r){return this._enabled=t,this._logLevel=o(e),this._tracer=r,this},_noopSpan(){return this.__noopSpan||(this.__noopSpan=new n(this._tracer)),this.__noopSpan},reset(){return this._logger=s,this._enabled=!1,delete this._tracer,delete this.__noopSpan,this._deprecate=a(((t,e)=>(u((()=>this._logger.error(e))),this))),this._logLevel=o(),this},debug(t){return this._enabled&&this._isLogLevelEnabled("debug")&&u((()=>this._logger.debug(c(t)))),this},info(t){return this._logger.info?(this._enabled&&this._isLogLevelEnabled("info")&&u((()=>this._logger.info(c(t)))),this):this.debug(t)},warn(t){return this._logger.warn?(this._enabled&&this._isLogLevelEnabled("warn")&&u((()=>this._logger.warn(c(t)))),this):this.debug(t)},error(t){return this._enabled&&this._isLogLevelEnabled("error")&&(t instanceof Function&&(t=t()),"object"==typeof t&&t?t.stack||(t=String(t.message||t)):t=String(t),"string"==typeof t&&(t=new Error(t)),u((()=>this._logger.error(t)))),this},deprecate(t,e){return this._deprecate(t,e)}};p.reset(),t.exports=p},2447:(t,e,r)=>{"use strict";const n=r(911).Span,s=r(2448),i=r(450);t.exports=class extends n{constructor(t,e){super(),this._noopTracer=t,this._noopContext=this._createContext(e)}_context(){return this._noopContext}_tracer(){return this._noopTracer}_createContext(t){const e=i();return new s(t?{noop:this,traceId:t._traceId,spanId:e,parentId:t._spanId,baggageItems:Object.assign({},t._baggageItems)}:{noop:this,traceId:e,spanId:e})}}},2448:(t,e,r)=>{"use strict";const n=r(548),s=r(2446).USER_REJECT;t.exports=class extends n{constructor(t){super(t),this._traceFlags.sampled=!1,this._sampling.priority=s}}},569:(t,e,r)=>{"use strict";const n=r(911).Tracer,s=r(556),i=r(2447),o=r(1435);t.exports=class extends n{constructor(t){let e;super(t),e="false"===o.env("DD_CONTEXT_PROPAGATION")?r(2427):r(2449),this._scopeManager=new e,this._scope=new s(t),this._span=new i(this)}trace(t,e,r){return r(this._span,(()=>{}))}wrap(t,e,r){return r}scopeManager(){return this._scopeManager}scope(){return this._scope}currentSpan(){return null}getRumData(){return""}setUrl(){}_startSpan(t,e){return this._span}}},571:t=>{"use strict";t.exports=class{inject(t,e){}extract(t){return null}}},2532:(t,e,r)=>{"use strict";const n=r(2453);t.exports=class extends n{}},2534:(t,e,r)=>{"use strict";const n=r(450),s=r(548);t.exports=class{constructor(t){this._config=t}inject(t,e){e&&(e.dd={},t&&(e.dd.trace_id=t.toTraceId(),e.dd.span_id=t.toSpanId()),this._config.service&&(e.dd.service=this._config.service),this._config.version&&(e.dd.version=this._config.version),this._config.env&&(e.dd.env=this._config.env))}extract(t){if(!(t&&t.dd&&t.dd.trace_id&&t.dd.span_id))return null;return new s({traceId:n(t.dd.trace_id,10),spanId:n(t.dd.span_id,10)})}}},2453:(t,e,r)=>{"use strict";const n=r(2531),s=r(450),i=r(548),o=r(2448),a=r(269),c="x-datadog-trace-id",u="x-datadog-parent-id",p="x-datadog-origin",h="x-datadog-sampling-priority",l="x-datadog-sampled",_="ot-baggage-",d="x-b3-traceid",f=/^([0-9a-f]{16}){1,2}$/i,g="x-b3-spanid",m=/^[0-9a-f]{16}$/i,v="x-b3-parentspanid",y="x-b3-sampled",E="x-b3-flags",b="b3",S=/^(([0-9a-f]{16}){1,2}-[0-9a-f]{16}(-[01d](-[0-9a-f]{16})?)?|[01d])$/i,x=new RegExp("^ot-baggage-(.+)$"),T=[c,u,h,p].concat([d,g,v,y,E,b]);t.exports=class{constructor(t){this._config=t}inject(t,e){e[c]=t.toTraceId(),e[u]=t.toSpanId(),e[l]=t._traceFlags.sampled?"1":"0",this._injectOrigin(t,e),this._injectSamplingPriority(t,e),this._injectBaggageItems(t,e),this._injectB3(t,e),a.debug((()=>`Inject into carrier: ${JSON.stringify(n(e,T))}.`))}extract(t){const e=this._extractSpanContext(t);return e?(this._extractOrigin(t,e),this._extractBaggageItems(t,e),this._extractSamplingPriority(t,e),a.debug((()=>`Extract from carrier: ${JSON.stringify(n(t,T))}.`)),e):e}_injectOrigin(t,e){const r=t._trace.origin;r&&(e[p]=r)}_injectSamplingPriority(t,e){const r=t._sampling.priority;Number.isInteger(r)&&(e[h]=r.toString())}_injectBaggageItems(t,e){t._baggageItems&&Object.keys(t._baggageItems).forEach((r=>{e[_+r]=String(t._baggageItems[r])}))}_injectB3(t,e){this._config.experimental.b3&&(e[d]=t._traceId.toString("hex"),e[g]=t._spanId.toString("hex"),e[y]=t._traceFlags.sampled?"1":"0",t._traceFlags.debug&&(e[E]="1"),t._parentId&&(e[v]=t._parentId.toString("hex")))}_extractSpanContext(t){const e=this._extractContext(t);return e?!1!==e.traceFlags.sampled?new i(e):new o(e):null}_extractContext(t){return this._extractDatadogContext(t)||this._extractB3Context(t)}_extractDatadogContext(t){const e=this._isSampled(t[l]);return this._extractGenericContext(t,c,u,{sampled:e},10)}_extractB3Context(t){if(!this._config.experimental.b3)return null;const e=this._extractB3Headers(t),r="1"===e[E],n=this._isSampled(e[y],r);return this._extractGenericContext(e,d,g,{sampled:n,debug:r})}_extractGenericContext(t,e,r,n,i){return t[e]&&t[r]?{traceId:s(t[e],i),spanId:s(t[r],i),traceFlags:n}:"boolean"==typeof n.sampled?{traceId:s(),spanId:null,traceFlags:n}:null}_extractB3Headers(t){return S.test(t.b3)?this._extractB3SingleHeader(t):this._extractB3MultipleHeaders(t)}_extractB3MultipleHeaders(t){const e={};return f.test(t[d])&&m.test(t[g])&&(e[d]=t[d],e[g]=t[g]),t[y]&&(e[y]=t[y]),t[E]&&(e[E]=t[E]),e}_extractB3SingleHeader(t){const e=t.b3.split("-");if("d"===e[0])return{[y]:"1",[E]:"1"};if(1===e.length)return{[y]:e[0]};{const t={[d]:e[0],[g]:e[1],[y]:"0"!==e[2]?"1":"0"};return"d"===e[2]&&(t[E]="1"),t}}_extractOrigin(t,e){const r=t[p];"string"==typeof t[p]&&(e._trace.origin=r)}_extractBaggageItems(t,e){Object.keys(t).forEach((r=>{const n=r.match(x);n&&(e._baggageItems[n[1]]=t[r])}))}_extractSamplingPriority(t,e){const r=parseInt(t[h],10);Number.isInteger(r)&&(e._sampling.priority=parseInt(t[h],10))}_isSampled(t,e){return!(!e&&"1"!==t)||"0"!==t&&null}}},2523:(t,e,r)=>{"use strict";const n=r(911).Span,s=r(548),i=r(1435),o=r(3297),a=r(450),c=r(2450),u=o.SAMPLE_RATE_METRIC_KEY;t.exports=class extends n{constructor(t,e,r,n,s,o){super();const a=s.operationName,c=s.parent||null,p=Object.assign({[u]:r.rate()},s.tags),h=s.hostname;this._parentTracer=t,this._debug=o,this._sampler=r,this._processor=e,this._prioritySampler=n,this._spanContext=this._createContext(c),this._spanContext._name=a,this._spanContext._tags=p,this._spanContext._hostname=h,this._startTime=s.startTime||this._getTime(),o&&(this._handle=i.metrics().track(this))}toString(){const t=this.context(),e=t._tags["resource.name"],r=e.length>100?e.substring(0,97)+"...":e;return"Span"+JSON.stringify({traceId:t._traceId,spanId:t._spanId,parentId:t._parentId,service:t._tags["service.name"],name:t._name,resource:r})}_createContext(t){let e;if(t)e=new s({traceId:t._traceId,spanId:a(),parentId:t._spanId,sampling:t._sampling,baggageItems:Object.assign({},t._baggageItems),trace:t._trace});else{const t=a();e=new s({traceId:t,spanId:t})}return e._trace.started.push(this),e._trace.startTime=e._trace.startTime||Date.now(),e._trace.ticks=e._trace.ticks||i.now(),e}_getTime(){const{startTime:t,ticks:e}=this._spanContext._trace;return t+i.now()-e}_context(){return this._spanContext}_tracer(){return this._parentTracer}_setOperationName(t){this._spanContext._name=t}_setBaggageItem(t,e){this._spanContext._baggageItems[t]=e}_getBaggageItem(t){return this._spanContext._baggageItems[t]}_addTags(t){c.add(this._spanContext._tags,t)}_finish(t){void 0===this._duration&&(t=parseFloat(t)||this._getTime(),this._duration=t-this._startTime,this._spanContext._trace.finished.push(this),this._spanContext._isFinished=!0,this._debug&&this._handle.finish(),this._processor.process(this))}}},548:(t,e,r)=>{"use strict";const n=r(911).SpanContext;t.exports=class extends n{constructor(t){super(),t=t||{},this._traceId=t.traceId,this._spanId=t.spanId,this._parentId=t.parentId||null,this._name=t.name,this._isFinished=t.isFinished||!1,this._tags=t.tags||{},this._sampling=t.sampling||{},this._baggageItems=t.baggageItems||{},this._traceFlags=t.traceFlags||{},this._traceFlags.sampled=!1!==this._traceFlags.sampled,this._traceFlags.debug=!0===this._traceFlags.debug,this._noop=t.noop||null,this._trace=t.trace||{started:[],finished:[]}}toTraceId(){return this._traceId.toString(10)}toSpanId(){return this._spanId.toString(10)}}},570:(t,e,r)=>{"use strict";const n=r(911),s=n.Tracer,i=n.Reference,o=r(2523),a=r(548),c=r(2524),u=r(2451),p=r(2526),h=r(2453),l=r(2532),_=r(571),d=r(2534),f=r(2447),g=r(2445),m=r(269),v=r(3297),y=r(1435),E=v.REFERENCE_NOOP,b=n.REFERENCE_CHILD_OF,S=n.REFERENCE_FOLLOWS_FROM;t.exports=class extends s{constructor(t){super();const e=y.exporter(t.experimental.exporter);this._service=t.service,this._version=t.version,this._env=t.env,this._tags=t.tags,this._logInjection=t.logInjection,this._analytics=t.analytics,this._debug=t.debug,this._internalErrors=t.experimental.internalErrors,this._prioritySampler=new p(t.env,t.experimental.sampler),this._exporter=new e(t,this._prioritySampler),this._processor=new c(this._exporter,this._prioritySampler),this._url=this._exporter._url,this._sampler=new u(t.sampleRate),this._peers=t.experimental.peers,this._enableGetRumData=t.experimental.enableGetRumData,this._propagators={[g.TEXT_MAP]:new h(t),[g.HTTP_HEADERS]:new l(t),[g.BINARY]:new _(t),[g.LOG]:new d(t)},t.reportHostname&&(this._hostname=y.hostname())}startSpan(t,e){if(e){if(e.references)return super.startSpan(t,e);if(e.childOf){let r=e.childOf;if(r instanceof o&&(r=r.context()),r instanceof a)return this._startSpanInternal(t,e,r,b)}}return this._startSpanInternal(t,e,null,null)}_startSpan(t,e){const r=function(t=[]){let e=null;for(let r=0;r<t.length;r++){const n=t[r];if(!(n instanceof i)){m.error((()=>`Expected ${n} to be an instance of opentracing.Reference`));continue}const s=n.referencedContext(),o=n.type();if(o===E||!s||s instanceof a){if(o===b||o===E){e=n;break}o===S&&(e||(e=n))}else m.error((()=>`Expected ${s} to be an instance of SpanContext`))}return e}(e.references),n=r&&r.type(),s=r&&r.referencedContext();return this._startSpanInternal(t,e,s,n)}_startSpanInternal(t,e={},r,n){if(r&&r._noop)return r._noop;if(!function(t,e,r){return r!==E&&(!(e&&!e._traceFlags.sampled)&&!(!e&&!t.isSampled()))}(this._sampler,r,n))return new f(this,r);const s={"service.name":this._service},i=new o(this,this._processor,this._sampler,this._prioritySampler,{operationName:e.operationName||t,parent:r,tags:s,startTime:e.startTime,hostname:this._hostname},this._debug);return i.addTags(this._tags),i.addTags(e.tags),i.addTags(y.tags()),i}_inject(t,e,r){try{this._prioritySampler.sample(t),this._propagators[e].inject(t,r)}catch(t){m.error(t),y.metrics().increment("datadog.tracer.node.inject.errors",!0)}return this}_extract(t,e){try{return this._propagators[t].extract(e)}catch(t){return m.error(t),y.metrics().increment("datadog.tracer.node.extract.errors",!0),null}}}},2473:t=>{"use strict";t.exports=window.crypto||window.msCrypto},2475:t=>{"use strict";t.exports=t=>window[t]},2492:(t,e,r)=>{"use strict";const n=r(2493);t.exports=()=>n},2472:(t,e,r)=>{"use strict";const n=r(2473),s=r(2474),i=r(2475),o=r(2476),a=r(2477),c=r(2478),u=r(567),p=r(2491),h=r(2492),l=r(2494),_=r(2495),d={_config:{},name:()=>{},version:()=>{},engine:()=>{},crypto:n,now:s,env:i,tags:o,validate:a,service:()=>"browser",appVersion:()=>null,metrics:c,plugins:u,startupLog:p,hostname:()=>{},on:()=>{},off:()=>{},Loader:l,getScope:()=>_,exporter:h,profiler:()=>({start:()=>{},stop:()=>{}})};t.exports=d},2494:t=>{"use strict";t.exports=class{constructor(t){this._instrumenter=t}reload(t){t.forEach(((t,e)=>{this._instrumenter.unload(e),this._instrumenter.load(e,t)}))}load(t,e){const r=window[t.name],n=this._instrumenter.patch(t,r,e);window[t.name]=n||r}}},2478:t=>{"use strict";let e=null;t.exports=function(){return e||(e={start:()=>{},stop:()=>{},track:()=>({finish:()=>{}}),boolean(){},histogram(){},count(){},gauge(){},increment(){},decrement(){}})}},2474:t=>{"use strict";t.exports=()=>window.performance.now()},2491:t=>{"use strict";t.exports={startupLog:()=>{},setStartupLogConfig:()=>{},setStartupLogInstrumenter:()=>{},setSamplingRules:()=>{}}},2476:t=>{"use strict";t.exports=()=>{const t=window.DD_RUM;return{...t&&t.getInternalContext&&t.getInternalContext()}}},2477:t=>{"use strict";t.exports=function(){}},1435:t=>{"use strict";t.exports={use(t){Object.assign(this,t)},configure(t){this._config=t}}},567:(t,e,r)=>{"use strict";t.exports={fetch:r(2480),xmlhttprequest:r(2490)}},2438:(t,e,r)=>{"use strict";const n=r(2489),s={isPeer(t,e){if(!t)return!1;for(const r of e){if(t===r)return!0;if(r instanceof RegExp&&r.test(t))return!0}return!1}};t.exports=Object.assign({},n,s)},2489:t=>{"use strict";const e={setHost(t,e,r){e&&t.setTag("out.host",e),r&&t.setTag("out.port",r)},wrap(t,e){return"function"!=typeof e&&e?function(t){return"object"==typeof t&&null!==t}(n=e)&&"function"==typeof n.then?function(t,e){return e.then((()=>r(t)),(e=>r(t,e))),e}(t,e):void 0:function(t,e){const n=t.tracer().scope(),s=n.active();return function(i){if(r(t,i),e)return n.activate(s,(()=>e.apply(this,arguments)))}}(t,e);var n}};function r(t,e){e&&t.addTags({"error.type":e.name,"error.msg":e.message,"error.stack":e.stack}),t.finish()}t.exports=e},2526:(t,e,r)=>{"use strict";const n=r(2527),s=r(2451),i=r(2444),{setSamplingRules:o}=r(1435).startupLog,{SAMPLING_RULE_DECISION:a,SAMPLING_LIMIT_DECISION:c,SAMPLING_AGENT_DECISION:u}=r(3297),p=i.tags.SERVICE_NAME,h=i.tags.SAMPLING_PRIORITY,l=i.tags.MANUAL_KEEP,_=i.tags.MANUAL_DROP,d=i.priority.USER_REJECT,f=i.priority.AUTO_REJECT,g=i.priority.AUTO_KEEP,m=i.priority.USER_KEEP,v="service:,env:";t.exports=class{constructor(t,{sampleRate:e,rateLimit:r=100,rules:s=[]}={}){this._env=t,this._rules=this._normalizeRules(s,e),this._limiter=new n(r),o(this._rules),this.update({})}isSampled(t){const e=this._getContext(t),r=this._findRule(e);return r?this._isSampledByRule(e,r)&&this._isSampledByRateLimit(e):this._isSampledByAgent(e)}sample(t){if(!t)return;const e=this._getContext(t);if(void 0!==e._sampling.priority)return;const r=this._getPriority(e._tags);this.validate(r)?e._sampling.priority=r:e._sampling.priority=this.isSampled(t)?g:f}update(t){const e={};for(const r in t){const n=t[r],i=new s(n);e[r]=i}e[v]=e[v]||new s(g),this._samplers=e}validate(t){switch(t){case d:case m:case f:case g:return!0;default:return!1}}_getContext(t){return"function"==typeof t.context?t.context():t}_getPriority(t){if(t.hasOwnProperty(l)&&!1!==t[l])return m;if(t.hasOwnProperty(_)&&!1!==t[_])return d;{const e=parseInt(t[h],10);if(1===e||2===e)return m;if(0===e||-1===e)return d}}_isSampledByRule(t,e){return t._tags[a]=e.sampleRate,e.sampler.isSampled(t)}_isSampledByRateLimit(t){const e=this._limiter.isAllowed();return t._tags[c]=this._limiter.effectiveRate(),e}_isSampledByAgent(t){const e=`service:${t._tags[p]},env:${this._env}`,r=this._samplers[e]||this._samplers[v];return t._tags[u]=r.rate(),r.isSampled(t)}_normalizeRules(t,e){return t.concat({sampleRate:e}).map((t=>({...t,sampleRate:parseFloat(t.sampleRate)}))).filter((t=>!isNaN(t.sampleRate))).map((t=>({...t,sampler:new s(t.sampleRate)})))}_findRule(t){for(let e=0,r=this._rules.length;e<r;e++)if(this._matchRule(t,this._rules[e]))return this._rules[e]}_matchRule(t,e){const r=t._name,n=t._tags["service.name"];return!(e.name instanceof RegExp&&!e.name.test(r))&&((!e.name||e.name===r)&&(!(e.service instanceof RegExp&&!e.service.test(n))&&(!e.service||e.service===n)))}}},2518:(t,e,r)=>{"use strict";const n=r(911).Tracer,s=r(569),i=r(2521),o=r(2535),a=r(2537),c=r(1435),u=r(269),{setStartupLogInstrumenter:p}=c.startupLog,h=r(2539),l=new s;t.exports=class extends n{constructor(){super(),this._tracer=l,this._instrumenter=new a(this),this._deprecate=t=>u.deprecate("tracer."+t,[`tracer.${t}() is deprecated.`,"Please use tracer.startSpan() and tracer.scope() instead.","See: https://datadog.github.io/dd-trace-js/#manual-instrumentation."].join(" "))}init(t){if(this._tracer===l)try{const e=new o(t);u.use(e.logger),u.toggle(e.debug,e.logLevel,this),c.configure(e),c.profiler().start(),e.enabled&&(c.validate(),e.runtimeMetrics&&c.metrics().start(),e.analytics&&h.enable(),this._tracer=new i(e),this._instrumenter.enable(e),p(this._instrumenter))}catch(t){u.error(t)}return this}use(){return this._instrumenter.use.apply(this._instrumenter,arguments),this}trace(t,e,r){if(r||(r=e,e={}),"function"==typeof r)return e=e||{},this._tracer.trace(t,e,r)}wrap(t,e,r){return r||(r=e,e={}),"function"!=typeof r?r:(e=e||{},this._tracer.wrap(t,e,r))}setUrl(){return this._tracer.setUrl.apply(this._tracer,arguments),this}startSpan(){return this._tracer.startSpan.apply(this._tracer,arguments)}inject(){return this._tracer.inject.apply(this._tracer,arguments)}extract(){return this._tracer.extract.apply(this._tracer,arguments)}scopeManager(){return this._deprecate("scopeManager"),this._tracer.scopeManager.apply(this._tracer,arguments)}scope(){return this._tracer.scope.apply(this._tracer,arguments)}currentSpan(){return this._deprecate("currentSpan"),this._tracer.currentSpan.apply(this._tracer,arguments)}bind(t){return this._deprecate("bind"),t}bindEmitter(){this._deprecate("bindEmitter")}getRumData(){return this._tracer.getRumData.apply(this._tracer,arguments)}}},2527:(t,e,r)=>{"use strict";const n=r(2528);t.exports=class{constructor(t){this._rateLimit=parseInt(t),this._limiter=new n.RateLimiter(this._rateLimit,"second"),this._tokensRequested=0,this._prevIntervalTokens=0,this._prevTokensRequested=0}isAllowed(){const t=this._limiter.curIntervalStart,e=this._limiter.tokensThisInterval,r=this._isAllowed();return t!==this._limiter.curIntervalStart?(this._prevIntervalTokens=e,this._prevTokensRequested=this._tokensRequested,this._tokensRequested=1):this._tokensRequested++,r}effectiveRate(){if(this._rateLimit<0)return 1;if(0===this._rateLimit)return 0;if(0===this._tokensRequested)return 1;return(this._prevIntervalTokens+this._limiter.tokensThisInterval)/(this._prevTokensRequested+this._tokensRequested)}_isAllowed(){return this._rateLimit<0||0!==this._rateLimit&&this._limiter.tryRemoveTokens(1)}_currentWindowRate(){return this._rateLimit<0?1:0===this._rateLimit?0:0===this._tokensRequested?1:this._limiter.tokensThisInterval/this._tokensRequested}}},2451:t=>{"use strict";t.exports=class{constructor(t){this._rate=t}rate(){return this._rate}isSampled(){return 1===this._rate||Math.random()<this._rate}}},556:t=>{"use strict";class e{active(){return this._active()||null}activate(t,e){if("function"!=typeof e)return e;try{return this._activate(t,e)}catch(e){throw t&&"function"==typeof t.setTag&&t.setTag("error",e),e}}bind(t,e){return t=this._bindEmitter(t,e),t=this._bindPromise(t,e),t=this._bindFn(t,e)}unbind(t){return t=this._unbindFn(t),t=this._unbindPromise(t),t=this._unbindEmitter(t)}_active(){return null}_activate(t,e){return e()}_bindFn(t,e){if("function"!=typeof t)return t;const r=this,n=this._spanOrActive(e),s=function(){return r.activate(n,(()=>t.apply(this,arguments)))};return s._datadog_unbound=t,s}_unbindFn(t){return"function"!=typeof t?t:t._datadog_unbound||t}_bindEmitter(t,r){return this._isEmitter(t)?(t.__is_dd_emitter||e._wrapEmitter(t),t.__dd_span=r,t.__dd_scope=this,t):t}static _wrapEmitter(t){o(t,"addListener",n),o(t,"prependListener",n),o(t,"on",n),o(t,"once",n),o(t,"removeListener",s),o(t,"off",s),o(t,"removeAllListeners",i),t.__is_dd_emitter=!0}_unbindEmitter(t){return this._isEmitter(t)?(delete t.__dd_scope,delete t.__dd_span,t):t}_bindPromise(t,e){return this._isPromise(t)?(o(t,"then",r,this,e),t):t}_unbindPromise(t){return this._isPromise(t)?(t.then=t.then._datadog_unbound||t.then,t):t}_spanOrActive(t){return void 0!==t?t:this.active()}_isEmitter(t){return t&&"function"==typeof t.emit&&"function"==typeof t.on&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}_isPromise(t){return t&&"function"==typeof t.then}}function r(t,e,r){return function(n,s){const i=new Array(arguments.length);for(let t=0,n=i.length;t<n;t++)i[t]=e.bind(arguments[t],r);return t.apply(this,i)}}function n(t){return function(e,r){if(!this.__dd_scope||!r||r._datadog_unbound||r.listener)return t.apply(this,arguments);const n=this.__dd_scope,s=this.__dd_span,i=n.bind(r,n._spanOrActive(s));this._datadog_events=this._datadog_events||{},this._datadog_events[e]||(this._datadog_events[e]=new WeakMap);const o=this._datadog_events[e];return o.has(r)||o.set(r,[]),o.get(r).push(i),t.call(this,e,i)}}function s(t){return function(e,r){if(!this.__dd_scope)return t.apply(this,arguments);const n=this._datadog_events&&this._datadog_events[e];if(!r||!n||!n.has(r))return t.apply(this,arguments);for(const s of n.get(r))t.call(this,e,s);return n.delete(r),t.call(this,e,r)}}function i(t){return function(e){return this.__dd_scope&&this._datadog_events&&(e?delete this._datadog_events[e]:delete this._datadog_events),t.call(this,e)}}function o(t,e,r,...n){if(!t[e]||t[e]._datadog_unbound)return;const s=t[e];t[e]=r(t[e],...n),t[e]._datadog_unbound=s}t.exports=e},2520:t=>{"use strict";t.exports=class{constructor(t,e){this._span=t,this._finishSpanOnClose=e,this.close()}span(){return this._span}close(){this._finishSpanOnClose&&this._span.finish()}}},2427:(t,e,r)=>{"use strict";const n=r(911).Span,s=r(2520);let i=null;const o=new n;t.exports=class{constructor(){return i||(i=this),i}active(){return new s(o)}activate(t,e){return new s(t,e)}}},2449:(t,e,r)=>{"use strict";const n=r(2427);t.exports=n},2495:(t,e,r)=>{"use strict";const n=r(556),s=window.Zone;let i=null;t.exports=class extends n{constructor(){if(i)return i;super(),i=this}_active(){return s?s.current.get("_datadog_span"):null}_activate(t,e){if(!s)return e();const r={properties:{_datadog_span:t}};return s.current.fork(r).run((()=>e()))}}},2524:(t,e,r)=>{const n=r(269),s=r(2525);t.exports=class{constructor(t,e){this._exporter=t,this._prioritySampler=e}process(t){const e=t.context(),r=e._trace;if(r.started.length===r.finished.length){if(this._prioritySampler.sample(e),!1===e._traceFlags.sampled)return n.debug((()=>"Dropping trace due to user configured filtering: "+r.started)),void this._erase(r);const t=r.finished.map(s);this._exporter.export(t),this._erase(r)}}_erase(t){t.finished.forEach((t=>{t.context()._tags={}})),t.started=[],t.finished=[]}}},2450:(t,e,r)=>{"use strict";const n=r(269);t.exports={add:function t(e,r){if(e&&r){if("string"==typeof r)return t(e,r.split(",").filter((t=>-1!==t.indexOf(":"))).reduce(((t,e)=>{const r=e.split(":"),n=r[0],s=r.slice(1).join(":");return t[n]=s,t}),{}));if(Array.isArray(r))return r.forEach((r=>t(e,r)));try{Object.keys(r).forEach((t=>{e[t]=r[t]}))}catch(t){n.error(t)}}}}},2521:(t,e,r)=>{"use strict";const n=r(570),s=r(2384),i=r(2454),o=r(1435),{setStartupLogConfig:a}=o.startupLog,c=s.SPAN_TYPE,u=s.RESOURCE_NAME,p=s.SERVICE_NAME,h=s.ANALYTICS,l=i.NOOP;function _(t,e){e&&e instanceof Error&&t.addTags({"error.type":e.name,"error.msg":e.message,"error.stack":e.stack})}t.exports=class extends n{constructor(t){super(t),this._scopeManager=function(t){let e;e=t.scope===l?r(2427):r(2449);return new e}(t),this._scope=function(t){let e;e=t.scope===l?r(556):o.getScope(t.scope);return new e(t)}(t),a(t)}trace(t,e,r){if(!(e=Object.assign({},{childOf:this.scope().active()},e)).childOf&&!1===e.orphanable)return r(null,(()=>{}));const n=this.startSpan(t,e);!function(t,e){const r={};e.type&&(r[c]=e.type);e.service&&(r[p]=e.service);e.resource&&(r[u]=e.resource);r[h]=e.analytics,t.addTags(r)}(n,e);try{if(r.length>1)return this.scope().activate(n,(()=>r(n,(t=>{_(n,t),n.finish()}))));const t=this.scope().activate(n,(()=>r(n)));return t&&"function"==typeof t.then?t.then((()=>n.finish()),(t=>{_(n,t),n.finish()})):n.finish(),t}catch(t){throw _(n,t),n.finish(),t}}wrap(t,e,r){const n=this;return function(){let s=e;if("function"==typeof s&&"function"==typeof r&&(s=s.apply(this,arguments)),!1===s.orphanable&&!n.scope().active())return r.apply(this,arguments);const i=arguments.length-1,o=arguments[i];if("function"==typeof o){const e=n.scope().bind(o);return n.trace(t,s,((t,n)=>(arguments[i]=function(t){return n(t),e.apply(this,arguments)},r.apply(this,arguments))))}return n.trace(t,s,(()=>r.apply(this,arguments)))}}setUrl(t){this._exporter.setUrl(t)}scopeManager(){return this._scopeManager}scope(){return this._scope}currentSpan(){return this.scope().active()}getRumData(){if(!this._enableGetRumData)return"";return`<meta name="dd-trace-id" content="${this.scope().active().context().toTraceId()}" /><meta name="dd-trace-time" content="${Date.now()}" />`}}},2455:t=>{"use strict";t.exports={isTrue:function(t){return"true"===(t=String(t).toLowerCase())||"1"===t},isFalse:function(t){return"false"===(t=String(t).toLowerCase())||"0"===t}}},2536:t=>{"use strict";function e(t){return null!=t&&t==t}t.exports=function(){for(var t,r=arguments.length,n=0;n<r;n++)if(e(t=arguments[n]))return t;return t}},2528:(t,e,r)=>{e.RateLimiter=r(2529),e.TokenBucket=r(2452)},2530:t=>{t.exports=function(){if("undefined"!=typeof process&&process.hrtime){var t=process.hrtime(),e=t[0],r=t[1];return 1e3*e+Math.floor(r/1e6)}return(new Date).getTime()}},2529:(t,e,r)=>{var n=r(2452),s=r(2530),i=function(t,e,r){this.tokenBucket=new n(t,t,e,null),this.tokenBucket.content=t,this.curIntervalStart=s(),this.tokensThisInterval=0,this.fireImmediately=r};i.prototype={tokenBucket:null,curIntervalStart:0,tokensThisInterval:0,fireImmediately:!1,removeTokens:function(t,e){if(t>this.tokenBucket.bucketSize)return process.nextTick(e.bind(null,"Requested tokens "+t+" exceeds maximum tokens per interval "+this.tokenBucket.bucketSize,null)),!1;var r=this,n=s();if((n<this.curIntervalStart||n-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=n,this.tokensThisInterval=0),t>this.tokenBucket.tokensPerInterval-this.tokensThisInterval){if(this.fireImmediately)process.nextTick(e.bind(null,null,-1));else{var i=Math.ceil(this.curIntervalStart+this.tokenBucket.interval-n);setTimeout((function(){r.tokenBucket.removeTokens(t,o)}),i)}return!1}return this.tokenBucket.removeTokens(t,o);function o(n,s){if(n)return e(n,null);r.tokensThisInterval+=t,e(null,s)}},tryRemoveTokens:function(t){if(t>this.tokenBucket.bucketSize)return!1;var e=s();if((e<this.curIntervalStart||e-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=e,this.tokensThisInterval=0),t>this.tokenBucket.tokensPerInterval-this.tokensThisInterval)return!1;var r=this.tokenBucket.tryRemoveTokens(t);return r&&(this.tokensThisInterval+=t),r},getTokensRemaining:function(){return this.tokenBucket.drip(),this.tokenBucket.content}},t.exports=i},2452:t=>{var e=function(t,e,r,n){if(this.bucketSize=t,this.tokensPerInterval=e,"string"==typeof r)switch(r){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+r)}else this.interval=r;this.parentBucket=n,this.content=0,this.lastDrip=+new Date};e.prototype={bucketSize:1,tokensPerInterval:1,interval:1e3,parentBucket:null,content:0,lastDrip:0,removeTokens:function(t,e){var r=this;return this.bucketSize?t>this.bucketSize?(process.nextTick(e.bind(null,"Requested tokens "+t+" exceeds bucket size "+this.bucketSize,null)),!1):(this.drip(),t>this.content?n():this.parentBucket?this.parentBucket.removeTokens(t,(function(s,i){return s?e(s,null):t>r.content?n():(r.content-=t,void e(null,Math.min(i,r.content)))})):(this.content-=t,process.nextTick(e.bind(null,null,this.content)),!0)):(process.nextTick(e.bind(null,null,t,Number.POSITIVE_INFINITY)),!0);function n(){var n=Math.ceil((t-r.content)*(r.interval/r.tokensPerInterval));return setTimeout((function(){r.removeTokens(t,e)}),n),!1}},tryRemoveTokens:function(t){return!this.bucketSize||!(t>this.bucketSize)&&(this.drip(),!(t>this.content)&&(!(this.parentBucket&&!this.parentBucket.tryRemoveTokens(t))&&(this.content-=t,!0)))},drip:function(){if(this.tokensPerInterval){var t=+new Date,e=Math.max(t-this.lastDrip,0);this.lastDrip=t;var r=e*(this.tokensPerInterval/this.interval);this.content=Math.min(this.content+r,this.bucketSize)}else this.content=this.bucketSize}},t.exports=e},2531:(t,e,r)=>{var n=9007199254740991,s="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]",a="[object Symbol]",c="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,u="object"==typeof self&&self&&self.Object===Object&&self,p=c||u||Function("return this")();function h(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function l(t,e){for(var r=-1,n=e.length,s=t.length;++r<n;)t[s+r]=e[r];return t}var _=Object.prototype,d=_.hasOwnProperty,f=_.toString,g=p.Symbol,m=_.propertyIsEnumerable,v=g?g.isConcatSpreadable:void 0,y=Math.max;function E(t,e,r,n,s){var i=-1,o=t.length;for(r||(r=b),s||(s=[]);++i<o;){var a=t[i];e>0&&r(a)?e>1?E(a,e-1,r,n,s):l(s,a):n||(s[s.length]=a)}return s}function b(t){return x(t)||function(t){return function(t){return T(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}(t.length)&&!function(t){var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?f.call(t):"";return e==i||e==o}(t)}(t)}(t)&&d.call(t,"callee")&&(!m.call(t,"callee")||f.call(t)==s)}(t)||!!(v&&t&&t[v])}function S(t){if("string"==typeof t||function(t){return"symbol"==typeof t||T(t)&&f.call(t)==a}(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}var x=Array.isArray;function T(t){return!!t&&"object"==typeof t}var I,w,R=(I=function(t,e){return null==t?{}:function(t,e){return function(t,e,r){for(var n=-1,s=e.length,i={};++n<s;){var o=e[n],a=t[o];r(a,o)&&(i[o]=a)}return i}(t=Object(t),e,(function(e,r){return r in t}))}(t,function(t,e){for(var r=-1,n=t?t.length:0,s=Array(n);++r<n;)s[r]=e(t[r],r,t);return s}(E(e,1),S))},w=y(void 0===w?I.length-1:w,0),function(){for(var t=arguments,e=-1,r=y(t.length-w,0),n=Array(r);++e<r;)n[e]=t[w+e];e=-1;for(var s=Array(w+1);++e<w;)s[e]=t[e];return s[w]=n,h(I,this,s)});t.exports=R},2483:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){this.buffer=t};e.default=r},2434:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FORMAT_BINARY="binary",e.FORMAT_TEXT_MAP="text_map",e.FORMAT_HTTP_HEADERS="http_headers",e.REFERENCE_CHILD_OF="child_of",e.REFERENCE_FOLLOWS_FROM="follows_from"},2484:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SPAN_KIND="span.kind",e.SPAN_KIND_RPC_CLIENT="client",e.SPAN_KIND_RPC_SERVER="server",e.SPAN_KIND_MESSAGING_PRODUCER="producer",e.SPAN_KIND_MESSAGING_CONSUMER="consumer",e.ERROR="error",e.COMPONENT="component",e.SAMPLING_PRIORITY="sampling.priority",e.PEER_SERVICE="peer.service",e.PEER_HOSTNAME="peer.hostname",e.PEER_ADDRESS="peer.address",e.PEER_HOST_IPV4="peer.ipv4",e.PEER_HOST_IPV6="peer.ipv6",e.PEER_PORT="peer.port",e.HTTP_URL="http.url",e.HTTP_METHOD="http.method",e.HTTP_STATUS_CODE="http.status_code",e.MESSAGE_BUS_DESTINATION="message_bus.destination",e.DB_INSTANCE="db.instance",e.DB_STATEMENT="db.statement",e.DB_TYPE="db.type",e.DB_USER="db.user"},2433:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2434),s=r(2435),i=r(541);e.childOf=function(t){return t instanceof i.default&&(t=t.context()),new s.default(n.REFERENCE_CHILD_OF,t)},e.followsFrom=function(t){return t instanceof i.default&&(t=t.context()),new s.default(n.REFERENCE_FOLLOWS_FROM,t)}},2488:function(t,e,r){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(555),o=new i.default,a=null,c=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.startSpan=function(){var t=a||o;return t.startSpan.apply(t,arguments)},e.prototype.inject=function(){var t=a||o;return t.inject.apply(t,arguments)},e.prototype.extract=function(){var t=a||o;return t.extract.apply(t,arguments)},e}(i.default));e.initGlobalTracer=function(t){a=t},e.globalTracer=function(){return c}},911:(t,e,r)=>{"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0});var s=r(2483);e.BinaryCarrier=s.default;var i=r(2484);e.Tags=i;var o=r(2403),a=r(2435);e.Reference=a.default;var c=r(541);e.Span=c.default;var u=r(2432);e.SpanContext=u.default;var p=r(555);e.Tracer=p.Tracer;var h=r(568);e.MockTracer=h.MockTracer,n(r(2488)),n(r(2434)),n(r(2433)),o.initialize()},568:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2436);e.MockContext=n.default;var s=r(2437);e.MockSpan=s.default;var i=r(2486);e.MockTracer=i.default},2436:function(t,e,r){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var r=t.call(this)||this;return r._span=e,r}return s(e,t),e.prototype.span=function(){return this._span},e}(r(911).SpanContext);e.MockContext=i,e.default=i},2487:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=this;this.spans=t,this.spansByUUID={},this.spansByTag={},this.debugSpans=[],this.unfinishedSpans=[],t.forEach((function(t){0===t._finishMs&&e.unfinishedSpans.push(t),e.spansByUUID[t.uuid()]=t,e.debugSpans.push(t.debug());var r=t.tags();Object.keys(r).forEach((function(n){var s=r[n];e.spansByTag[n]=e.spansByTag[n]||{},e.spansByTag[n][s]=e.spansByTag[n][s]||[],e.spansByTag[n][s].push(t)}))}))}return t.prototype.firstSpanWithTagValue=function(t,e){var r=this.spansByTag[t];if(!r)return null;var n=r[e];return n?n[0]:null},t}();e.MockReport=r,e.default=r},2437:function(t,e,r){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(911),o=r(2436),a=function(t){function e(e){var r=t.call(this)||this;return r._mockTracer=e,r._uuid=r._generateUUID(),r._startMs=Date.now(),r._finishMs=0,r._operationName="",r._tags={},r._logs=[],r}return s(e,t),e.prototype._context=function(){return new o.default(this)},e.prototype._setOperationName=function(t){this._operationName=t},e.prototype._addTags=function(t){for(var e=0,r=Object.keys(t);e<r.length;e++){var n=r[e];this._tags[n]=t[n]}},e.prototype._log=function(t,e){this._logs.push({fields:t,timestamp:e})},e.prototype._finish=function(t){this._finishMs=t||Date.now()},e.prototype.uuid=function(){return this._uuid},e.prototype.operationName=function(){return this._operationName},e.prototype.durationMs=function(){return this._finishMs-this._startMs},e.prototype.tags=function(){return this._tags},e.prototype.tracer=function(){return this._mockTracer},e.prototype._generateUUID=function(){return""+("00000000"+Math.abs(4294967295*Math.random()|0).toString(16)).substr(-8)+("00000000"+Math.abs(4294967295*Math.random()|0).toString(16)).substr(-8)},e.prototype.addReference=function(t){},e.prototype.debug=function(){var t={uuid:this._uuid,operation:this._operationName,millis:[this._finishMs-this._startMs,this._startMs,this._finishMs]};return Object.keys(this._tags).length&&(t.tags=this._tags),t},e}(i.Span);e.MockSpan=a,e.default=a},2486:function(t,e,r){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=r(911),o=r(2487),a=r(2437),c=function(t){function e(){var e=t.call(this)||this;return e._spans=[],e}return s(e,t),e.prototype._startSpan=function(t,e){var r=this._allocSpan();if(r.setOperationName(t),this._spans.push(r),e.references)for(var n=0,s=e.references;n<s.length;n++){var i=s[n];r.addReference(i)}return r._startStack=(new Error).stack,r},e.prototype._inject=function(t,e,r){throw new Error("NOT YET IMPLEMENTED")},e.prototype._extract=function(t,e){throw new Error("NOT YET IMPLEMENTED")},e.prototype._allocSpan=function(){return new a.default(this)},e.prototype.clear=function(){this._spans=[]},e.prototype.report=function(){return new o.default(this._spans)},e}(i.Tracer);e.MockTracer=c,e.default=c},2403:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(541),s=r(2432),i=r(555);e.tracer=null,e.spanContext=null,e.span=null,e.initialize=function(){e.tracer=new i.default,e.span=new n.default,e.spanContext=new s.default}},2435:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(541),s=function(){function t(t,e){this._type=t,this._referencedContext=e instanceof n.default?e.context():e}return t.prototype.type=function(){return this._type},t.prototype.referencedContext=function(){return this._referencedContext},t}();e.default=s},541:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2403),s=function(){function t(){}return t.prototype.context=function(){return this._context()},t.prototype.tracer=function(){return this._tracer()},t.prototype.setOperationName=function(t){return this._setOperationName(t),this},t.prototype.setBaggageItem=function(t,e){return this._setBaggageItem(t,e),this},t.prototype.getBaggageItem=function(t){return this._getBaggageItem(t)},t.prototype.setTag=function(t,e){var r;return this._addTags(((r={})[t]=e,r)),this},t.prototype.addTags=function(t){return this._addTags(t),this},t.prototype.log=function(t,e){return this._log(t,e),this},t.prototype.logEvent=function(t,e){return this._log({event:t,payload:e})},t.prototype.finish=function(t){this._finish(t)},t.prototype._context=function(){return n.spanContext},t.prototype._tracer=function(){return n.tracer},t.prototype._setOperationName=function(t){},t.prototype._setBaggageItem=function(t,e){},t.prototype._getBaggageItem=function(t){},t.prototype._addTags=function(t){},t.prototype._log=function(t,e){},t.prototype._finish=function(t){},t}();e.Span=s,e.default=s},2432:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.toTraceId=function(){return""},t.prototype.toSpanId=function(){return""},t}();e.SpanContext=r,e.default=r},555:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2433),s=r(2403),i=r(541),o=function(){function t(){}return t.prototype.startSpan=function(t,e){if(void 0===e&&(e={}),e.childOf){var r=n.childOf(e.childOf);e.references?e.references.push(r):e.references=[r],delete e.childOf}return this._startSpan(t,e)},t.prototype.inject=function(t,e,r){return t instanceof i.default&&(t=t.context()),this._inject(t,e,r)},t.prototype.extract=function(t,e){return this._extract(t,e)},t.prototype._startSpan=function(t,e){return s.span},t.prototype._inject=function(t,e,r){},t.prototype._extract=function(t,e){return s.spanContext},t}();e.Tracer=o,e.default=o},2482:(t,e)=>{"use strict";var r=Object.prototype.hasOwnProperty;function n(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}e.stringify=function(t,e){e=e||"";var n,s,i=[];for(s in"string"!=typeof e&&(e="?"),t)if(r.call(t,s)){if((n=t[s])||null!=n&&!isNaN(n)||(n=""),s=encodeURIComponent(s),n=encodeURIComponent(n),null===s||null===n)continue;i.push(s+"="+n)}return i.length?e+i.join("&"):""},e.parse=function(t){for(var e,r=/([^=?&]+)=?([^&]*)/g,s={};e=r.exec(t);){var i=n(e[1]),o=n(e[2]);null===i||null===o||i in s||(s[i]=o)}return s}},2481:t=>{"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},2538:t=>{"use strict";function e(t){return"function"==typeof t}var r=console.error.bind(console);function n(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function s(t){t&&t.logger&&(e(t.logger)?r=t.logger:r("new logger isn't a function, not replacing"))}function i(t,s,i){if(t&&t[s]){if(!i)return r("no wrapper function"),void r((new Error).stack);if(e(t[s])&&e(i)){var o=t[s],a=i(o,s);return n(a,"__original",o),n(a,"__unwrap",(function(){t[s]===a&&n(t,s,o)})),n(a,"__wrapped",!0),n(t,s,a),a}r("original object and wrapper must be functions")}else r("no original function "+s+" to wrap")}function o(t,e){return t&&t[e]?t[e].__unwrap?t[e].__unwrap():void r("no original to unwrap to -- has "+e+" already been unwrapped?"):(r("no function to unwrap."),void r((new Error).stack))}s.wrap=i,s.massWrap=function(t,e,n){if(!t)return r("must provide one or more modules to patch"),void r((new Error).stack);Array.isArray(t)||(t=[t]),e&&Array.isArray(e)?t.forEach((function(t){e.forEach((function(e){i(t,e,n)}))})):r("must provide one or more functions to wrap on modules")},s.unwrap=o,s.massUnwrap=function(t,e){if(!t)return r("must provide one or more modules to patch"),void r((new Error).stack);Array.isArray(t)||(t=[t]),e&&Array.isArray(e)?t.forEach((function(t){e.forEach((function(e){o(t,e)}))})):r("must provide one or more functions to unwrap on modules")},t.exports=s},2319:(t,e,r)=>{"use strict";var n=r(2481),s=r(2482),i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,a=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function c(t){return(t||"").toString().replace(a,"")}var u=[["#","hash"],["?","query"],function(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function h(t){var e,n=("undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{}).location||{},s={},o=typeof(t=t||n);if("blob:"===t.protocol)s=new _(unescape(t.pathname),{});else if("string"===o)for(e in s=new _(t,{}),p)delete s[e];else if("object"===o){for(e in t)e in p||(s[e]=t[e]);void 0===s.slashes&&(s.slashes=i.test(t.href))}return s}function l(t){t=c(t);var e=o.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function _(t,e,r){if(t=c(t),!(this instanceof _))return new _(t,e,r);var i,o,a,p,d,f,g=u.slice(),m=typeof e,v=this,y=0;for("object"!==m&&"string"!==m&&(r=e,e=null),r&&"function"!=typeof r&&(r=s.parse),e=h(e),i=!(o=l(t||"")).protocol&&!o.slashes,v.slashes=o.slashes||i&&e.slashes,v.protocol=o.protocol||e.protocol||"",t=o.rest,o.slashes||(g[3]=[/(.*)/,"pathname"]);y<g.length;y++)"function"!=typeof(p=g[y])?(a=p[0],f=p[1],a!=a?v[f]=t:"string"==typeof a?~(d=t.indexOf(a))&&("number"==typeof p[2]?(v[f]=t.slice(0,d),t=t.slice(d+p[2])):(v[f]=t.slice(d),t=t.slice(0,d))):(d=a.exec(t))&&(v[f]=d[1],t=t.slice(0,d.index)),v[f]=v[f]||i&&p[3]&&e[f]||"",p[4]&&(v[f]=v[f].toLowerCase())):t=p(t);r&&(v.query=r(v.query)),i&&e.slashes&&"/"!==v.pathname.charAt(0)&&(""!==v.pathname||""!==e.pathname)&&(v.pathname=function(t,e){if(""===t)return e;for(var r=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=r.length,s=r[n-1],i=!1,o=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),o++):o&&(0===n&&(i=!0),r.splice(n,1),o--);return i&&r.unshift(""),"."!==s&&".."!==s||r.push(""),r.join("/")}(v.pathname,e.pathname)),n(v.port,v.protocol)||(v.host=v.hostname,v.port=""),v.username=v.password="",v.auth&&(p=v.auth.split(":"),v.username=p[0]||"",v.password=p[1]||""),v.origin=v.protocol&&v.host&&"file:"!==v.protocol?v.protocol+"//"+v.host:"null",v.href=v.toString()}_.prototype={set:function(t,e,r){var i=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(r||s.parse)(e)),i[t]=e;break;case"port":i[t]=e,n(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[t]="");break;case"hostname":i[t]=e,i.port&&(e+=":"+i.port),i.host=e;break;case"host":i[t]=e,/:\d+$/.test(e)?(e=e.split(":"),i.port=e.pop(),i.hostname=e.join(":")):(i.hostname=e,i.port="");break;case"protocol":i.protocol=e.toLowerCase(),i.slashes=!r;break;case"pathname":case"hash":if(e){var o="pathname"===t?"/":"#";i[t]=e.charAt(0)!==o?o+e:e}else i[t]=e;break;default:i[t]=e}for(var a=0;a<u.length;a++){var c=u[a];c[4]&&(i[c[1]]=i[c[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(t){t&&"function"==typeof t||(t=s.stringify);var e,r=this,n=r.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var i=n+(r.slashes?"//":"");return r.username&&(i+=r.username,r.password&&(i+=":"+r.password),i+="@"),i+=r.host+r.pathname,(e="object"==typeof r.query?t(r.query):r.query)&&(i+="?"!==e.charAt(0)?"?"+e:e),r.hash&&(i+=r.hash),i}},_.extractProtocol=l,_.location=h,_.trimLeft=c,_.qs=s,t.exports=_}}]);